<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trang chủ MOI</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <style>
        .nav-link.active {
            color: red !important;
        }
        .carousel-caption {
            text-align: left;
            right: 15%;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-white shadow-sm">
    <div class="container-fluid px-4">
        <a class="navbar-brand fw-bold fs-3" href="#">MOI</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbar">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0 gap-3 fw-semibold">
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/sanpham" data-ajax="true">Sản Phẩm</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/chatlieu" data-ajax="true">Chất liệu</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/coao" data-ajax="true">Cổ Áo</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/danhmuc" data-ajax="true">Danh Mục</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/kichthuoc" data-ajax="true">Kích Thước</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/kieudang" data-ajax="true">Kiểu Dáng</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/mausac" data-ajax="true">Màu Sắc</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/thietke" data-ajax="true">Thiết Kế</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/thuonghieu" data-ajax="true">Thương Hiệu</a></li>
                <li class="nav-item"><a class="nav-link" href="/admin/fragment/SPCT" data-ajax="true">Sản Phẩm Chi Tiết</a></li>
                <li class="nav-item"><a class="nav-link" href="/fragment/registerStaff" data-ajax="true">Đăng Kí Staff</a></li>
            </ul>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/logout">Logout</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container mt-5" id="mainContent">
    <!-- Nội dung mặc định -->
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow rounded-4">
                <div class="card-header bg-white text-black text-center rounded-top-4">
                    <h4 class="mb-0"><i class="bi bi-person-circle me-2"></i>Thông tin Admin</h4>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label fw-semibold"><i class="bi bi-person-fill me-2"></i>Username:</label>
                        <div class="form-control bg-light"><span th:text="${user.lastName}">Tên người dùng</span></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold"><i class="bi bi-envelope-fill me-2"></i>Email:</label>
                        <div class="form-control bg-light"><span th:text="${user.email}">Email người dùng</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-light pt-5 pb-4 mt-5">
    <div class="container text-md-left">
        <div class="row text-md-left">
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">MOI Store</h5>
                <p>Chuyên cung cấp các sản phẩm thời trang chính hãng, mang phong cách trẻ trung, năng động và thời thượng.</p>
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">Sản phẩm</h5>
                <p><a href="#" class="text-light text-decoration-none">Áo</a></p>
                <p><a href="#" class="text-light text-decoration-none">Giày</a></p>
                <p><a href="#" class="text-light text-decoration-none">Túi xách</a></p>
                <p><a href="#" class="text-light text-decoration-none">Phụ kiện</a></p>
            </div>
            <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">Hỗ trợ</h5>
                <p><a href="#" class="text-light text-decoration-none">Liên hệ</a></p>
                <p><a href="#" class="text-light text-decoration-none">Hướng dẫn mua hàng</a></p>
                <p><a href="#" class="text-light text-decoration-none">Chính sách đổi trả</a></p>
                <p><a href="#" class="text-light text-decoration-none">Câu hỏi thường gặp</a></p>
            </div>
            <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                <h5 class="text-uppercase mb-4 font-weight-bold">Liên hệ</h5>
                <p><i class="bi bi-house-fill me-2"></i>123 Trịnh Văn Bô, Hà Nội</p>
                <p><i class="bi bi-envelope-fill me-2"></i>support@moistore.vn</p>
                <p><i class="bi bi-phone-fill me-2"></i>+84 123 456 789</p>
                <p><i class="bi bi-globe2 me-2"></i>www.moistore.vn</p>
            </div>
        </div>
        <div class="row mt-4 text-center">
            <div class="col">
                <a href="#" class="text-light me-3"><i class="bi bi-facebook fs-4"></i></a>
                <a href="#" class="text-light me-3"><i class="bi bi-instagram fs-4"></i></a>
                <a href="#" class="text-light me-3"><i class="bi bi-youtube fs-4"></i></a>
                <a href="#" class="text-light"><i class="bi bi-tiktok fs-4"></i></a>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col text-center">
                <p class="text-muted small">&copy; 2025 MOI Store. All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>

<!-- Bootstrap JS + Icons -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<script>
    let currentAjaxController = null;

    function initAjaxHandlers() {
        const mainContent = document.getElementById("mainContent");

        document.querySelectorAll("a[data-ajax='true']").forEach(link => {
            link.addEventListener("click", function (e) {
                e.preventDefault();

                // Hủy request cũ nếu có
                if (currentAjaxController) {
                    currentAjaxController.abort();
                }

                currentAjaxController = new AbortController();
                const signal = currentAjaxController.signal;

                fetch(this.href, { signal })
                    .then(res => res.text())
                    .then(html => {
                        mainContent.innerHTML = html;
                        initAjaxHandlers();
                    })
                    .catch(err => {
                        if (err.name !== 'AbortError') {
                            console.error("Lỗi khi load dữ liệu:", err);
                        }
                    });
            });
        });

        document.querySelectorAll("form[data-ajax='true']").forEach(form => {
            form.addEventListener("submit", function (e) {
                e.preventDefault();

                // Hủy request cũ nếu có
                if (currentAjaxController) {
                    currentAjaxController.abort();
                }

                currentAjaxController = new AbortController();
                const signal = currentAjaxController.signal;

                const formData = new FormData(form);
                fetch(form.action, {
                    method: form.method,
                    body: formData,
                    signal
                })
                    .then(res => res.text())
                    .then(html => {
                        mainContent.innerHTML = html;
                        initAjaxHandlers();
                    })
                    .catch(err => {
                        if (err.name !== 'AbortError') {
                            console.error("Lỗi khi gửi form:", err);
                        }
                    });
            });
        });
    }


    document.addEventListener("DOMContentLoaded", function () {
        initAjaxHandlers();
    });
</script>


</body>
</html>